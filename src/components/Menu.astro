---
import Menu from './Menu/Menu.js';

export interface Props {
  hidden?: boolean;
}
const {hidden = true} = Astro.props as Props;
---

<Menu hidden={hidden} id='menu' />

<style is:global>
  [cmdk-root] {
    translate: 0 calc(-2--bgsq + -1--bgl);

    max-width: 100vw;
    overflow-x: hidden;

    border-radius: 12px;

    & > * {
      backdrop-filter: blur(2px);
      /* background-color: rgb(41 37 36 / 40%); */
    }
  }

  [cmdk-header] {
    height: calc(2--bgsq + 1--bgl);
    font-size: calc(var(--logomark-rem) * 0.7rem);
    font-weight: 250;

    min-width: 100%;
    max-width: 100vw;
    overflow-x: hidden;
    overflow-y: hidden;
    /* scroll-snap-type: inline proximity; */

    background-color: transparent;
    backdrop-filter: blur(11px);

    @keyframes blur-in {
      from {
        backdrop-filter: blur(0px);
      }
      to {
        backdrop-filter: blur(11px);
      }
    }
    animation: blur-in 0.5s 1;

    display: block;
    position: relative;

    padding-left: 8px;
    padding-top: 0.25rem;

    white-space: nowrap;

    & > .logomark {
      @keyframes slide-in {
        from {
          transform: translateX(-100%);
        }
        to {
          translate: translateX(0);
        }
      }
      animation: slide-in 0.5s 1;
      will-change: transform;
      /* scroll-snap-align: start;
      scroll-margin-inline-start: 8px; */
      display: inline-block;
    }
  }

  [cmdk-input] {
    font-size: inherit;
    border: none;
    padding: 0;
    color: white;

    outline: none;
    display: inline-block;
    background: transparent;

    &::placeholder {
      font-size: 0.5em;
    }

    &:placeholder-shown {
      @keyframes deblur {
        0%,
        60% {
          visibility: hidden;
        }
        60% {
          display: inline-block;
          filter: blur(11px);
        }
        to {
          filter: blur(0px);
        }
      }

      animation: deblur 1s linear 1;
    }

    &:focus {
      &::placeholder {
        opacity: 0;
      }

      @import '../colors.scss';
      caret-color: $red;

      @keyframes blink-rainbow {
        0% {
          caret-color: $orange;
        }
        14.4% {
          caret-color: $yellow;
        }
        28.7% {
          caret-color: $green;
        }
        42.8% {
          caret-color: $aqua;
        }
        55.1% {
          caret-color: $blue;
        }
        71.4% {
          caret-color: $purple;
        }
        78.4% {
          caret-color: #a14bc3;
        }
        85.7% {
          caret-color: $fuchsia;
        }
      }

      animation: 7s linear infinite blink-rainbow;
      animation-delay: 500ms;
    }
  }

  [cmdk-root] kbd {
    font-family: var(--font-sans);
    background: var(--gray3);
    color: var(--gray11);
    height: 20px;
    width: 20px;
    border-radius: 4px;
    padding: 0 4px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  [cmdk-root] kbd:first-of-type {
    margin-left: 8px;
  }

  @keyframes slide-down {
    from {
      height: 0;
    }
    to {
      height: 393px;
    }
  }

  [cmdk-list] {
    padding: 0 8px;
    height: 393px;
    overflow: auto;
    overscroll-behavior: contain;
    padding-bottom: 40px;

    animation: slide-down 1s 1;
  }

  [cmdk-item] {
    content-visibility: auto;
    cursor: pointer;
    height: 40px;
    border-radius: 8px;
    font-size: 14px;
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 0 8px;
    color: var(--gray12);
    user-select: none;
    will-change: background, color;
    transition: all 150ms ease;
    transition-property: none;
  }

  [cmdk-item][aria-selected='true'] {
    background: var(--gray4);
    color: var(--gray12);
  }

  [cmdk-item][aria-disabled='true'] {
    color: var(--gray8);
    cursor: not-allowed;
  }

  [cmdk-item]:active {
    transition-property: background;
    background: var(--gray4);
  }

  [cmdk-item]:first-child {
    margin-top: 8px;
  }

  [cmdk-item] + [cmdk-item] {
    margin-top: 4px;
  }

  [cmdk-raycast-meta] {
    margin-left: auto;
    color: var(--gray11);
    font-size: 13px;
  }

  [cmdk-separator] {
    height: 1px;

    background: var(--gray5);
    margin: 4px 0;
  }

  *:not([hidden]) + [cmdk-group] {
    margin-top: 8px;
  }

  [cmdk-group-heading] {
    user-select: none;
    font-size: 12px;
    color: var(--gray11);
    padding: 0 8px;
    display: flex;
    align-items: center;
  }

  [cmdk-dialog] {
    z-index: var(--layer-portal);
    position: fixed;
    left: 50%;
    top: var(--page-top);
    transform: translateX(-50%);
  }

  [cmdk-dialog][data-state='closed'] [cmdk] {
    animation: dialogOut var(--transition-fast) forwards;
  }

  [cmdk-empty] {
    font-size: 14px;
    display: flex;
    align-items: center;
    justify-content: center;
    height: 64px;
    white-space: pre-wrap;
    color: var(--gray11);
  }
</style>
